<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://ttyn.me/</id>
  <title>ttyn Syndication</title>
  <updated>2013-02-18T16:00:00Z</updated>
  <link rel="alternate" href="http://ttyn.me/"/>
  <link rel="self" href="http://ttyn.me/atom.xml"/>
  <author>
    <name>andy</name>
    <uri>http://ttyn.me</uri>
  </author>
  <entry>
    <id>tag:ttyn.me,2013-02-19:/2013/02/19/ansible_intro.html</id>
    <title type="html">开始使用配置和发布管理 with ansible</title>
    <published>2013-02-18T16:00:00Z</published>
    <updated>2013-02-19T04:55:26Z</updated>
    <link rel="alternate" href="http://ttyn.me/2013/02/19/ansible_intro.html"/>
    <content type="html">&lt;p&gt;趁着假期研究了一下，发现ansible比以前讨论过的chef/puppet/capistrano
和现在用的fabric等同类方便太多了&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Advantages&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;好处1. 直接使用ssh协议(可以选择用openssh或者python封装的paramiko)&lt;/li&gt;
&lt;li&gt;client不需要安装软件或者开启端口。client需要安装一个python-simplejson包(提供json格式返回结果)就可以直接使用&lt;/li&gt;
&lt;li&gt;好处2. 适合从ad-hoc的紧急工作到有序部署的大型架构，
因为ansible将系统的配置作为数据使用yaml格式保存，
而不是python code，所以系统配置/架构可以非常清晰。
对于复杂度高的多server和复杂度低的幂等架构都可以快速部署&lt;/li&gt;
&lt;li&gt;好处3. ansible源于开发了cobble的Michael DeHaan, 他也是puppet团队成员，
对于配置管理/部署等工作非常熟悉，很靠谱。&lt;/li&gt;
&lt;li&gt;需要考虑的: 对于ssh keybased验证和sudo权限需要预先了解和部署&lt;/li&gt;
&lt;li&gt;需要纪录的: 即使使用 openssh连接，ansible也会忽略 ~/.ssh/config中的Port配置，必须在inventory文件定义中显示标注&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;特征&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;特征1. 使用类似于chef的push发放配置&lt;/li&gt;
&lt;li&gt;特征2. ansible的配置管理叫做playbook&lt;/li&gt;
&lt;li&gt;特征3. 可以使用普通用户，加入 -s 参数或者相应配置在playbook文件中启用sudo授权&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;试用（假设 ~/.ssh/config 中已经有remote_webserver_01 配置ssh keybased连接)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt; 安装：

&lt;ul&gt;
&lt;li&gt;使用python的virtualenv建立一个ansible环境 (可忽略although建议不)

&lt;pre&gt;&lt;code&gt;  mkvirtualenv ansi_env 
  workon ansi_env
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;安装依赖的包

&lt;pre&gt;&lt;code&gt;  pip install yolk paramiko jinja2 PyYAML
  yolk -l
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;直接使用pip包，目前是1.0版本

&lt;pre&gt;&lt;code&gt;  pip install ansible
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;或者用git HEAD

&lt;pre&gt;&lt;code&gt;  cd ~/git_working
  git clone https://github.com/ansible/ansible.git github.gen.ansible
  cd !$
  git checkout devel 
  # source ./hacking/env-setup  如果要使用缺省系统路径，就执行这一步
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt; 一个简单的ansible inventory文件

&lt;ul&gt;
&lt;li&gt;cat ./etc_ansible_hosts_sample

&lt;pre&gt;&lt;code&gt;   # -- ansible_hosts_sample 01 - webservers
   ansible_sudo=root 
   ansible_ssh_port=225 

   [rack01_phy]
   192.168.66.91
   192.168.66.209

   [rack01_vm]
   192.168.03.[201:206]

   [idc01_new_initing]
   192.168.06.44:23455

   [idc02_db]
   10.12.0.14:23455
   10.12.0.16:23456

   [aws_farm]
   aws_06:22 ansible_python_interpreter=/usr/bin/python26
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;最基本的ansible操作

&lt;pre&gt;&lt;code&gt;  # -i 指定使用的inventory文件
  ansible -i ./etc_ansible_hosts_sample --list-hosts all 
  ansible -i ./etc_ansible_hosts_sample --list-hosts rack01_vm 

  # ansible ping module会检查remote server是否有python的simplejson模块，
  # 如果没有，会报错。-c ssh 指定连接方式为openssh
  ansible -i ./etc_ansible_hosts_sample -c ssh -u remote_devuser idc02_db -m ping 
  # 使用raw模式安装ansible依赖的python-simplejson包, -s 是sudo 
  export JSON_PACKAGE='python-simplejson.x86_64'; 
  ansible -i ./etc_ansible_hosts_sample \
  -c ssh -u remote_devuser idc01_new_initing \
  -s -a "yum install -y $JSON_PACKAGE" 
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;☀ ansible中文名字叫做安塞波&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;☀ 文档: http://ansible.cc/docs/&lt;/li&gt;
&lt;li&gt;☀ FAQ: http://ansible.cc/faq.html&lt;/li&gt;
&lt;li&gt;☀ playbooks sample: https://github.com/mpdehaan/ansible-examples&lt;/li&gt;
&lt;li&gt;reference links

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.mail-archive.com/puppet-users@googlegroups.com/msg33389.html"&gt;compare with puppet(英文)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/ansible/ansible/issues/1221"&gt;remote env in bashrc&lt;/a&gt; # 远程环境变量问题应该不算是ansible的问题，不过最好提前考虑好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;The End | 文檔終點&lt;/h2&gt;

&lt;p&gt;back to &lt;a href="http://ttyn.me"&gt;home&lt;/a&gt;&lt;/p&gt;
</content>
    <summary type="html">a basic introduction of ansible in Chinese</summary>
  </entry>
  <entry>
    <id>tag:ttyn.me,2012-12-27:/2012/12/27/2013_resolution.html</id>
    <title type="html">2013 new year resolution</title>
    <published>2012-12-26T16:00:00Z</published>
    <updated>2013-01-18T09:46:30Z</updated>
    <link rel="alternate" href="http://ttyn.me/2012/12/27/2013_resolution.html"/>
    <content type="html">&lt;h1&gt;2013 new year resolution complete版&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;run @2013&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;☀ 50x26.1 mile&lt;/li&gt;
&lt;li&gt;☀ 319@2013 cim&lt;/li&gt;
&lt;li&gt;☀ 100km by myself&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;live @2013&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;☀ getting up early 早起  (still have no 頭緒 for how early? how how how)&lt;/li&gt;
&lt;li&gt;☀ nothing-new-year@2013.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;nono&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;no amazoncn&lt;/li&gt;
&lt;li&gt;no taobao&lt;/li&gt;
&lt;li&gt;no amazon&lt;/li&gt;
&lt;li&gt;no google play&lt;/li&gt;
&lt;li&gt;no new book/ebook&lt;/li&gt;
&lt;li&gt;no snack&lt;/li&gt;
&lt;li&gt;no big/small appliance.&lt;/li&gt;
&lt;li&gt;no lego and/or other toys&lt;/li&gt;
&lt;li&gt;no runningwares&lt;/li&gt;
&lt;li&gt;no no no animal products&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;reduce&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;instance coffee&lt;/li&gt;
&lt;li&gt;nuts and dark chocolate&lt;/li&gt;
&lt;li&gt;daily transportation&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;life essential&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;pair of flght tickets to california (&amp;amp; cim 2013)&lt;/li&gt;
&lt;li&gt;starbucks coffee&lt;/li&gt;
&lt;li&gt;daily vegies/fruits&lt;/li&gt;
&lt;li&gt;bread n beer&lt;/li&gt;
&lt;li&gt;zigaretten&lt;/li&gt;
&lt;li&gt;gift to family&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i already have&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;nexus 7&lt;/li&gt;
&lt;li&gt;piles of lego, painting tools, running shoes.&lt;/li&gt;
&lt;li&gt;thousands of books/ebooks&lt;/li&gt;
&lt;li&gt;rented room to stay.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;The End | 文檔終點&lt;/h2&gt;

&lt;p&gt;back to &lt;a href="http://ttyn.me"&gt;home&lt;/a&gt;&lt;/p&gt;
</content>
    <summary type="html">andy 2013 new year resolution</summary>
  </entry>
  <entry>
    <id>tag:ttyn.me,2012-12-26:/2012/12/26/hello_world.html</id>
    <title type="html">Hello World</title>
    <published>2012-12-25T16:00:00Z</published>
    <updated>2013-01-18T09:46:30Z</updated>
    <link rel="alternate" href="http://ttyn.me/2012/12/26/hello_world.html"/>
    <content type="html">&lt;p&gt;世事漫隨流水 算來一夢浮生&lt;/p&gt;
</content>
    <summary type="html">this is ...</summary>
  </entry>
  <entry>
    <id>tag:ttyn.me,2012-10-24:/2012/10/24/sa_monitors.html</id>
    <title type="html">monitor systems</title>
    <published>2012-10-23T16:00:00Z</published>
    <updated>2013-01-18T09:46:30Z</updated>
    <link rel="alternate" href="http://ttyn.me/2012/10/24/sa_monitors.html"/>
    <content type="html">&lt;h2&gt;The Server | 服務端&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Env | 環境&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;monitor by obfuscurity

&lt;ul&gt;
&lt;li&gt;Good = rrdtool, collectd, graphite&lt;/li&gt;
&lt;li&gt;Adequate = reconnoiter, munin, opentsdb, ganglia&lt;/li&gt;
&lt;li&gt;Bad = zenoss, zabbix, groundworks&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;graphite [plot]&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;http://graphite.wikidot.com&lt;/li&gt;
&lt;li&gt;[doc] http://www.aosabook.org/en/graphite.html&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;collectd [sensor]

&lt;ul&gt;
&lt;li&gt;http://collectd.org&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;coda hale`s metric lib @github [sensor]

&lt;ul&gt;
&lt;li&gt;https://github.com/codahale/metrics&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;etsy statsd @github [aggregator]

&lt;ul&gt;
&lt;li&gt;https://github.com/etsy/statsd&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;etsy logster @github [extract &amp;amp; aggregate]

&lt;ul&gt;
&lt;li&gt;https://github.com/etsy/logster&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;logstash [log relay &amp;amp; aggregate]

&lt;ul&gt;
&lt;li&gt;http://logstash.net&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;riemann monitor [external i/o sensor etc]

&lt;ul&gt;
&lt;li&gt;http://aphyr.github.com/riemann/&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;sensu [external i/o distributed]

&lt;ul&gt;
&lt;li&gt;https://github.com/sensu&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;heroku umpire @github [query]

&lt;ul&gt;
&lt;li&gt;https://github.com/heroku/umpire&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;comsat @github [notifier]

&lt;ul&gt;
&lt;li&gt;https://github.com/asenchi/comsat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;kibana [dashboard for logstash]

&lt;ul&gt;
&lt;li&gt;http://kibana.org&lt;/li&gt;
&lt;li&gt;arch doc: http://kibana.org/infrastructure.html&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;tasseo [dashboard for logstash/realtime]

&lt;ul&gt;
&lt;li&gt;https://github.com/obfuscurity/tasseo&lt;/li&gt;
&lt;li&gt;http://obfuscurity.com/2012/05/The-Story-Behind-Tasseo&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;descartes [dashboard for logstash/convention]&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;https://github.com/obfuscurity/descartes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;via &lt;a href="https://speakerdeck.com/u/obfuscurity/p/the-state-of-open-source-monitoring" title="obfuscurity keynote"&gt;original source - obfuscurity&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;The Ref | 參考文檔&lt;/h3&gt;

&lt;h2&gt;The End | 文檔終點&lt;/h2&gt;

&lt;p&gt;back to &lt;a href="http://ttyn.me"&gt;home&lt;/a&gt;&lt;/p&gt;
</content>
    <summary type="html">draft documentation over monitor system for system admins</summary>
  </entry>
  <entry>
    <id>tag:ttyn.me,2012-08-03:/2012/08/02/quantified_self.html</id>
    <title type="html">quantify me</title>
    <published>2012-08-02T17:14:48Z</published>
    <updated>2013-01-18T09:46:30Z</updated>
    <author>
      <name>andy</name>
      <uri>http://ttyn.me</uri>
    </author>
    <link rel="alternate" href="http://ttyn.me/2012/08/02/quantified_self.html"/>
    <content type="html">&lt;h2&gt;inspired via &lt;a href="http://news.ycombinator.com/item?id=4325346"&gt;hn&lt;/a&gt;&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;idea

&lt;ul&gt;
&lt;li&gt;measure: define (metric)&lt;/li&gt;
&lt;li&gt;tracking: input&lt;/li&gt;
&lt;li&gt;charting: output&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="http://feltron.com/about.html"&gt;nicholas felton&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;personal annual report&lt;/li&gt;
&lt;li&gt;daytum for chroniclers&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;apps&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://daytum.com/"&gt;daytum&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;get the total count of dones&lt;/li&gt;
&lt;li&gt;iphone app&lt;/li&gt;
&lt;li&gt;chart&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://didthis-actionwiki.appspot.com/"&gt;didthis&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;nice charting&lt;/li&gt;
&lt;li&gt;log everthing&lt;/li&gt;
&lt;li&gt;easy define (and log)&lt;/li&gt;
&lt;li&gt;web/iphone/android only (no cmdline)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://eatery.massivehealth.com/"&gt;eatery&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;calories only&lt;/li&gt;
&lt;li&gt;iphone app&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.lucidtracker.com/"&gt;lucidtracker&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;more like bento - self define all metrics&lt;/li&gt;
&lt;li&gt;web only&lt;/li&gt;
&lt;li&gt;nice chart&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="http://your.flowingdata.com/"&gt;flowingdata&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;input data via twitter&lt;/li&gt;
&lt;li&gt;got chart&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.chartmyself.com/"&gt;chartmyself&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;got chart&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://idonethis.com/"&gt;idonethis&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;via gmail/web/app&lt;/li&gt;
&lt;li&gt;team&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;more normal tracking&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;accounting&lt;/li&gt;
&lt;li&gt;sport tracking&lt;/li&gt;
&lt;li&gt;timesheet/punchcard&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;type of quantifiers [via lucidtracker]&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Yes/no (boolean)&lt;/li&gt;
&lt;li&gt;Quantity&lt;/li&gt;
&lt;li&gt;Short answer&lt;/li&gt;
&lt;li&gt;Open ended&lt;/li&gt;
&lt;li&gt;Time of Day (calendar)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

</content>
    <summary type="html">current quntify-me sites/app</summary>
  </entry>
</feed>
